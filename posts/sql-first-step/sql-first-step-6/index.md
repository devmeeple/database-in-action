---
title: "데이터베이스 객체 작성과 삭제"
date: 2024-07-02 23:21:02
tags:
  - SQL
series: "SQL 첫걸음"
---

> RDBMS의 인덱스가 무엇인지 알고 있고, 어떤 경우 인덱스가 사용이 안 되는지 알고 계신 분

- 데이터베이스 객체란?
- 테이블 작성, 삭제, 변경, 제약
- 인덱스란?
- 인덱스 구조, 작성과 삭제
- 뷰 작성과 삭제

## 데이터베이스 객체

!()

'데이터베이스 객체'란 테이블 외에 다양한 데이터를 저장, 관리하는 것을 의미한다. 테이블(Table), 뷰(View), 인덱스(Index), 프로시저(Procedure)등이 포함된다. 객체의 종류에 따라 저장되는 내용도 달라진다.

### 명명규칙

객체 이름이 중복되지 않도록 선언한다.

### 스키마

데이터베이스 객체는 스키마라는 공간에 선언한다. '스키마 객체'라 부른다.

### 선언

```sql
CREATE 객체종류이름;
DROP 객체종류 이름;
ALTER 객체종류 이름;
```

DDL[]을 사용해 스키마를 선언한다.

- CREATE: 작성
- DROP: 삭제
- ALTER: 변경

직전 글에서도 강조했지만 삭제 명령을 실행할 때 확인을 받지 않는다. 따라서 각별한 주의가 필요하다.

- 모든 행을 삭제할 때 TRUNCATE, DELETE 차이점

### ALTER

본문의 길이 기준이 길어짐,

## 제약

- 테이블 정합이란 무엇인가?

### 기본키

- 기본키란 무엇인가?
- 복수의 기본키? 복합키

## 인덱스(Index)

> 원하는 정보를 빠르게 찾을 수 있는 기술

인덱스는 조건을 만족하는 행을 빠르게 조회하기위해 사용한다. (성능향상)

인덱스는 흔히 '색인'이라고 이야기한다. 인덱스를 사용함으로 데이터를 빠르게 조회할 수 있다. 만약 인덱스를 사용하지 않는다면 데이터베이스는 풀 테이블 스캔(full table scan)으로 동작한다.
자주 사용되는 조건을 인덱스로 등록하면 성능상 이점을 얻는다. 하지만 인덱스는 자료구조 저장공간을 필요로 하고 쓰기 성능을 저하시킬 수 있으므로 적절한 전략 수립이 필요하다.

- 책에서 색인을 통해 빠르게 데이터를 조회할 수 있게 도움을 받듯, 컴퓨터는 인덱스를 통해 데이터 조회에 도움을 받는다.
- 데이터베이스 인덱스는 Tree 형식으로 데이터를 저장해둔다.
- BST, B-Tree, B+Tree, 인덱스가 없는 경우 full table scan, 인덱스가 있다면 인덱스로 조회한다.

- 인덱스는 레코드를 더 빠르게 검색할 수 있는 성능 조정 방법이다. 인덱스된 열에 나타나는 각 값에 대한 항목을 만든다. 각 인덱스 이름은 데이터베이스에 고유해야 한다.
- 인덱스는 조회속도 향상을 위해 사용한다.

### 인덱스가 사용되지 않는 경우

- 테이블의 데이터가 적다.
- 쿼리 조건에 사용되는 컬럼에 인덱스가 없다.
- 와일드카드 검색
- 자주 업데이트 되는 테이블

- 인덱스란 무엇인가?
  - 인덱스는 조회속도 향상을 위해 사용한다.
  - 빠르게 정렬하거나, 그룹핑 하기위해
  - 책의 목차와 비슷하다.
- 알고리즘
  - 이진 트리(binary tree)
  - 풀 테이블 스캔(full table scan): 인덱스가 지정하지 않은 테이블을 조회
  - 이진 탐색(binary search): 예시 그림

### 작성과 삭제

```sql
CREATE [UNIQUE] INDEX index_name 
    ON table_name (column1, column2, ... column_n);     
```

```sql
CREATE INDEX websites_idx
    ON websites (site_name);
```

- 여러 인덱스를 왜 선언하지?

- CREATE INDEX, CREATE UNIQUE INDEX
- multi column index, composite index
- primary key에는 index가 자동생성된다.

```sql
DROP INDEX index_name;
```

인덱스를 삭제하는 방법은 데이터베이스 시스템에 따라 다르다. MySQL의 경우 다음과 같이 선언한다.

```sql
DROP INDEX index_name ON table_name;
```

### 인덱스 확인하기

```sql
SHOW TABLE FROM table_name;
```

- 제품마다 다르게 적용
- 인덱스 선언도 저장공간을 차지한다.

### 실행 계획(EXPLAIN)

```sql
EXPLAIN SQL 명령
```

### 최적화

- 실행 계획을 기준으로 수행됨. 
- 인덱스의 품질이 중요

## 뷰(View)

- 정의: SELECT 명령을 기록하는 객체, 가상 테이블
- SELECT 에서만 사용하는 것을 권장, 무엇을 주의해야 할까?

### 작성과 삭제

```sql
CREATE VIEW 이름 AS SELECT 명령;
DROP VIEW 이름;
```

열을 왜 지정하지?

## 예시 & 실습

코딩테스트를 사용한 예시

## 마무리

### 참고자료

- [유튜브 'index가 뭔지 설명해보세요(개발면접시간)](https://youtu.be/iNvYsGKelYs?si=u_-CK1Gc1qt9KFuf)
